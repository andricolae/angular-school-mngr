<!-- ------------------SESSIONS TABLE + BUTTONS(EDIT/DELETE)--------------------------  -->

<div class="flex justify-between items-center mb-2">
  <h3 class="font-semibold">Course Sessions</h3>
  <button
    type="button"
    (click)="
      showSessionModal === false
        ? openAddSessionModal(AdminDashService.newCourse())
        : closeSessionModal()
    "
    class="bg-blue-500 hover:bg-blue-600 text-white px-3 py-1 rounded-lg text-sm transition"
  >
    {{ showSessionModal === false ? "Add Session" : "Close Session" }}
  </button>
</div>

@if (showSessionModal) {
<div class="flex items-center justify-center">
  <div class="rounded-lg p-6 w-full">
    <h3 class="text-lg font-semibold mb-4">
      {{ editingSessionIndex === -1 ? "Add" : "Edit" }} Session
    </h3>

    <div class="grid grid-cols-7 gap-4">
      <div class="sm:col-span-2">
        <label class="block text-sm font-medium text-gray-700 mb-1">Date</label>
        <input
          type="date"
          [(ngModel)]="editingSession.date"
          class="w-full p-2 border rounded-lg"
        />
      </div>

      <div class="sm:col-span-2">
        <label class="block text-sm font-medium text-gray-700 mb-1"
          >Start Time</label
        >
        <input
          type="time"
          [(ngModel)]="editingSession.startTime"
          class="w-full p-2 border rounded-lg"
        />
      </div>
      <div class="sm:col-span-2">
        <label class="block text-sm font-medium text-gray-700 mb-1"
          >End Time</label
        >
        <input
          type="time"
          [(ngModel)]="editingSession.endTime"
          class="w-full p-2 border rounded-lg"
        />
      </div>
      <!-- buttons -->
      <div class="flex justify-end gap-2 sm:col-span-1 mt-6">
        <!-- <button
        type="button"
        (click)="closeSessionModal()"
        class="px-4 py-2 bg-gray-200 hover:bg-gray-300 rounded-lg transition"
      >
        Cancel
      </button> -->
        <button
          type="button"
          (click)="saveSession()"
          class="px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg transition"
        >
          Save
        </button>
      </div>
    </div>
  </div>
</div>

@if(deleteSessionMessage){
<div>
  <p class="text-lg font-medium sm:col-span-4 mt-2 text-red-400">
    Do you really want to cancel updating this course?
  </p>
  <button
    type="button"
    class="block bg-blue-500 hover:bg-blue-600 text-white py-2 rounded-lg font-medium transition sm:col-span-1"
  >
    Yes
  </button>
  <button
    type="button"
    class="block bg-red-500 hover:bg-red-600 text-white py-2 rounded-lg font-medium transition sm:col-span-1"
    (click)="onDeleteSessionClick()"
  >
    No
  </button>
</div>
<!-- TESTING!!!!!! -->
<!-- <p>{{ AdminDashService.newCourse().sessions }}</p> -->
} } @if (AdminDashService.newCourse().sessions &&
AdminDashService.newCourse().sessions!.length > 0) {

<div class="max-h-48 overflow-y-auto">
  <table class="min-w-full">
    <thead>
      <tr class="bg-gray-50">
        <th class="py-2 px-3 text-left">Date</th>
        <th class="py-2 px-3 text-left">Time</th>
        <th class="py-2 px-3 text-center">Actions</th>
      </tr>
    </thead>
    <tbody>
      @for (session of sortedSessions; track session.id; let i = $index) {
      <tr class="border-b">
        <td class="py-2 px-3">{{ formatDate(session.date) }}</td>
        <td class="py-2 px-3">{{ session.startTime }}-{{ session.endTime }}</td>
        <td class="py-2 px-3 flex justify-center gap-2">
          <button
            type="button"
            (click)="editSession(AdminDashService.newCourse(), i)"
            class="text-blue-600 hover:text-blue-800"
            title="Edit session"
          >
            ✏️
          </button>
          <button
            type="button"
            (click)="deleteSession(i)"
            class="text-red-500 hover:text-red-700"
            title="Delete session"
          >
            ✖
          </button>
        </td>
      </tr>
      }
    </tbody>
  </table>
</div>
}
